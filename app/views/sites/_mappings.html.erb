<div class="mappings">
  <h3 class="remove-top-margin add-bottom-margin">Mappings</h3>
  <div class="list-group add-big-bottom-margin">
    <%= link_to site_mappings_path(@site), class: 'list-group-item' do %>
      <h4 class="list-group-item-heading"><%= mappings_edit_or_view %> mappings</h4>
      <p class="list-group-item-text text-muted">
        <strong><%= pluralize(number_with_delimiter(@site.mappings.count), 'path') %></strong> &mdash;
        <%= pluralize(number_with_delimiter(@site.mappings.redirects.count), 'redirect') %> and
        <%= pluralize(number_with_delimiter(@site.mappings.archives.count), 'archive') %>
      </p>
    <% end %>

    <% if current_user.can_edit?(@site.organisation) %>
      <%= link_to new_multiple_site_mappings_path(@site), class: 'list-group-item' do %>
        <h4 class="list-group-item-heading">Add mappings</h4>
      <% end %>
    <% end %>
    <% most_used_tags = most_used_tags_for_site(@site, limit: 10) %>
    <% if most_used_tags.any? %>
      <div class="list-group-item">
        <h4 class="list-group-item-heading">Mappings by tag</h4>
        <div class="list-group-item-text">
          <p class="text-muted add-bottom-margin">Tags used for grouping <%= @site.default_host.hostname %> mappings</p>
          <ul class="tag-list remove-bottom-margin">
            <% most_used_tags.each do |tag| %>
              <li>
                <%= link_to tag, site_mappings_path(@site, tagged: tag), class: 'tag' %>
              </li>
            <% end %>
          </ul>
        </div>
      </div>
    <% end %>
  </div>
</div>
